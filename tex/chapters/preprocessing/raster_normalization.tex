Input data normalization has been found to be of vital importance when training neural networks, in certain cases reducing predictive errors by several orders of magnitude and training times by one order of magnitude \cite{input_normalization_1997}.
How to normalize input data depends on distribution of the feature space, which will be investigated here.

\todo{Write about global vs local normalization, and normalization vs. standardization.}

\subsubsection*{RGB rasters}

A given RGB pixel is an unsigned 8-bit integer and therefore takes values in a bounded, integer domain
%
\begin{equation*}
  I_{i,j,c} \in \{0, 1, ..., 255\}, \text{ for } c \in \{r, g, b\}.
\end{equation*}
%
The distribution of each color channel over the entire coverage area of the Trondheim aerial photography data set is shown in \figref{fig:rgb-density}, and aggregate statistics for each channel are listed in \tabref{tab:rgb-statistics}.

\begin{figure}[htb]
  \begin{floatrow}
    \ffigbox[9cm]{%
      \includegraphics[width=\linewidth]{rgb-density}
    }{%
      \caption{
        Distribution density for all three color channels in the aerial photography data set covering Trondheim municipality (2017).
        %Peak at 64 and 191.
      }
      \label{fig:rgb-density}
    }
    \inlinetable{%
      \scalebox{0.85}{
        \begin{tabular}{
          l
          S[round-mode=places, round-precision=1]
          S[round-mode=places, round-precision=1]
        }
          \toprule
          {Channel} & {Mean [1]} & {SD [1]} \\
          \midrule
          \textcolor{red}{Red} & 101.60925940814 & 55.010463592563 \\
          \textcolor{green}{Green} & 102.67104002891 & 48.740409963323 \\
          \textcolor{blue}{Blue} & 91.286001382234 & 37.216349915699 \\
          \bottomrule
        \end{tabular}
      }
      \vspace{5em}
    }{%
      \caption{
        Aggregate statistics for each image channel distribution for the aerial photography data set covering Trondheim municipality (2017).
      }
      \label{tab:rgb-statistics}
    }
  \end{floatrow}
\end{figure}

The image channels can be easily normalized to the domain $[0, 1]$ by dividing by $255$ across all three image channels.
This is in essence a lossless transformation, since the normalization function $f(x) = x/255$ is trivially invertible, and thus no information is lost by this normalization.

\subsubsection*{LiDAR rasters}

The \enquote{$z$ channel} in the raster images represent elevation data from the respective digital surface model.
Elevation measurements are represented by 32-bit, single-precision floating point numbers, and can theoretically take values in the domain $I_{i,j,z} \in (\SI{-3.4e38}{\meter},~\SI{3.4e8}{\meter})$.
In practice, the measurements are bounded by the regional extrema, $(\SI{-433}{\meter},~\SI{8848}{\meter})$ for dry land globally, and $(\SI{-9}{\meter},~\SI{569}{\meter})$ for the Trondheim region.
The distribution of $z$ channel values for the Trondheim region is shown in \figref{fig:elevation-density}, and aggregate statistics are listed in \tabref{tab:elevation-statistics}.

\begin{figure}[htb]
  \begin{floatrow}
    \ffigbox[9cm]{%
      \includegraphics[width=\linewidth]{elevation-density}
    }{%
      \caption{
        Distribution density for elevation data set covering Trondheim municipality (2017).
        Outlier values $(\SI{0}{\meter}, \SI{2.74}{\percent})$ and $(\SI{148}{\meter}, \SI{1.93}{\percent})$ have been cropped.
      }
      \label{fig:elevation-density}
    }
    \inlinetable{%
      \scalebox{0.79}{
        \begin{tabular}{
          l
          S[round-mode=places, round-precision=1]
          S[round-mode=places, round-precision=1]
        }
          \toprule
          {Channel} & {Mean [m]} & {SD [m]} \\
          \midrule
          Elevation & 155.36339532445 & 116.52777315076 \\
          \bottomrule
        \end{tabular}
      }
      \vspace{7em}
    }{%
      \caption{
        Aggregate statistics for elevation data set covering municipality of Trondheim (2017).
      }
      \label{tab:elevation-statistics}
    }
  \end{floatrow}
\end{figure}

A normalization technique analogue to the RGB min-max scaling would be
\begin{equation*}
  f(z)
  =
  \frac{
    z - \underset{\mathrm{global}}{\min} \text{elevation}
  }{
    \underset{\mathrm{global}}{\max} \text{elevation} - \underset{\mathrm{global}}{\min} \text{elevation}
  }
  =
  \frac{
    z - (\SI{-9}{\meter})
  }{
    \SI{578}{\meter}
  }.
\end{equation*}

In order to evaluate if this will normalize the $z$ raster channel across tiles, we plot the \enquote{tile-by-tile} $z$ channel statistics in \figref{fig:elevation-spread}.

\begin{figure}[H]
  \centering
  \includegraphics[width=\linewidth]{elevation-spread}
  \caption{
    Elevation value statistics for a tile subset of sample size $n = 10.000$.
    The left figure shows the minimum, mean, and maximum elevation, sorted by increasing mean from left to right.
    The right figure shows the histogram of the tile elevation \textit{ranges} (difference between maximum elevation and minimum elevation within tile).
  }
  \label{fig:elevation-spread}
\end{figure}

While the global elevation range is $\SI{569}{\meter} - (\SI{-9}{\meter}) = \SI{578}{\meter}$, the elevation range within each respective tile is on average approximately $\SI{22}{\meter} \pm \SI{8}{\meter} (\mathrm{SD})$, that is, much less than \SI{578}{\meter}.
Coupled with the fact that the tile elevation \textit{means} are somewhat uniformly distributed between \SI{0}{\meter} and \SI{200}{\meter}, ignoring the right tail, a global normalization will yield tile elevation values with small standard deviations and highly variable means.
We can therefore conclude that global min-max scaling is not suitable for the elevation image channel.
