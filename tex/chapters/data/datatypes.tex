\subsubsection{Vector data}

A \textit{line string} is a ordered collection of geographic points $(\vec{p}_0, ..., \vec{p}_n)$ defining a path that connects each consequtive point by a straing line.
A \textit{simple} line string is a path which does \textit{not} cross itself, while a \textit{complex} line string is one that does.

A \textit{linear ring} is a line string where the first and last points are identical, $l = (\vec{p}_0, ..., \vec{p}_n, \vec{p}_0)$.
A \textit{polygon} is therefore represented by a simple linear ring which defines its \textit{exterior hull}, and zero or more simple linear strings which defines any possible \textit{interior hulls}.
This is illustrated in \figref{fig:polygon-representation}.

\begin{figure}[htb]
  \centering
  \input{tikz/simple_polygon.tex}
  \textcolor{gray}{\vrule}
  \hspace{0.01\linewidth}
  \input{tikz/interior_hull.tex}
  \caption{
    Simple polygon with four unique vertices is shown on the left hand side.
    A complex polygon with an an outer hull
    and an interior hull is shown on the right hand side for comparison.
  }
  \label{fig:polygon-representation}
\end{figure}

A polygon is considered invalid if one or more of its linear rings are self-intersecting (complex).
It is not uncommon for data providers to provide certain polygons in an invalid state, and since such polygons are not processable by many GIS tools, they should be fixed.
Zero-buffering invalid polygons (growing the polygon in all directions by zero units) fixes such problems, as can be seen in \figref{fig:complex-zero-buffer}.

\begin{figure}[H]
  \centering
  \input{tikz/self_intersecting_polygon.tex}
  \caption{Zero-buffering the polygon fixes self-intersecting polygons, as is shown here.}
  \label{fig:complex-zero-buffer}
\end{figure}

Zero-buffering polygons has the added benefit of normalizing vector data by re-ordering the polygon vertices in an anti-clockwise manner and removing redundant vertices, as shown in \figref{fig:redundant-zero-buffer}.

\begin{figure}[H]
  \centering
  \input{tikz/unnecessary_vertices.tex}
  \caption{Zero-buffering the polygon removes redundant vertices, as shown here.}
  \label{fig:redundant-zero-buffer}.
\end{figure}

This allows you to apply simpler similarity measures for comparing polygons, and reduces computational costs when processing the polygons.
We therefore pre-process all polygon data by applying a zero-buffer with \texttt{ogr2ogr}.

\begin{shellcode}
$ ogr2ogr -f "GPKG" ${output_file} ${input_file}
    -sql "select ST_buffer(Geometry, 0.0)"
\end{shellcode}

We will come back to how to combine vector and raster datasets by \textit{rasterization} in section \ref{sec:masking}, where it will also become clear why the removal of redundant vertices is of importance.
